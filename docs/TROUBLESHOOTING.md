# üè¥‚Äç‚ò†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ ARCTL - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ—à–∏–±–æ–∫ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

---

## ‚ö†Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è 1: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ runtime –æ—à–∏–±–∫–∏

### 1.1 –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç sentence-transformers
**–§–∞–π–ª:** `arctl/verification/metrics.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** `sentence-transformers` —É–∫–∞–∑–∞–Ω–∞ –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –≤ `pyproject.toml`, –Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —É—Å–ª–æ–≤–Ω–æ —Å fallback.

```python
try:
    from sentence_transformers import SentenceTransformer
    HAS_TRANSFORMERS = True
except ImportError:
    HAS_TRANSFORMERS = False
    print("[WARNING] sentence_transformers not installed...")
```

**–†–∏—Å–∫:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞–±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ, —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥—É—Ç, –Ω–æ `ResonanceVerifier` –±—É–¥–µ—Ç –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–º.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –õ–∏–±–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ optional dependencies, –ª–∏–±–æ —Å–¥–µ–ª–∞—Ç—å —è–≤–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
```toml
[project.optional-dependencies]
resonance = ["sentence-transformers"]
```

---

### 1.2 –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –≤ LexicalMetrics
**–§–∞–π–ª:** `arctl/verification/lexical.py` (—Å—Ç—Ä–æ–∫–∞ 9)

```python
def calculate(history_tokens: List[str], window: int = 50) -> RawMetrics:
    if not history_tokens:
        return RawMetrics(0.5, 0.0, 0.0)
    
    recent = history_tokens[-window:]
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `len(history_tokens) < window`, `recent` –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ `window`. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º –º–µ—Ç—Ä–∏–∫–∞–º –ø—Ä–∏ –º–∞–ª—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è—Ö.

**–†–∏—Å–∫:** –ü—Ä–∏ –≤—ã–∑–æ–≤–µ —Å 5 —Ç–æ–∫–µ–Ω–∞–º–∏ –∏ `window=50` –±—É–¥–µ—Ç –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Ç–æ–ª—å–∫–æ 5.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å warning.

---

### 1.3 –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–∞–ª–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–æ–≤
**–§–∞–π–ª:** `arctl/verification/metrics.py` (—Å—Ç—Ä–æ–∫–∞ 47)

```python
if not self.embedder or len(responses) < 2:
    return {"resonance_score": 0.0, ...}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `len(responses) == 1`, –≤–µ—Ä–Ω–µ—Ç—Å—è 0.0. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å—Ç–æ–ª–∫–æ–≤–∞–Ω–æ –∫–∞–∫ "–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ", –∞ –Ω–µ "–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö".

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `"insufficient_data": bool` –≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

---

## ‚ö†Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è 2: –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 2.1 –ü–æ–ª–∏–Ω–æ–º–∏–Ω–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤ verify()
**–§–∞–π–ª:** `arctl/verification/metrics.py` (—Å—Ç—Ä–æ–∫–∞ 65-70)

```python
for i in range(len(modes)):
    for j in range(i + 1, len(modes)):
        sim = self._calculate_pairwise_similarity(...)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ N=10 —Ä–µ–∂–∏–º–æ–≤ –±—É–¥–µ—Ç (10*9)/2 = 45 –ø–∞—Ä. –ü—Ä–∏ N=100 —ç—Ç–æ 4950 –ø–∞—Ä. –î–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –º–∞—Ç—Ä–∏—Ü–∞ —Å—Ö–æ–¥—Å—Ç–≤–∞.

**–†–∏—Å–∫:** O(N¬≤) –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∂–∏–º–æ–≤ (–æ–±—ã—á–Ω–æ 4-8).

---

### 2.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ blend_anchors
**–§–∞–π–ª:** `arctl/core/anchors.py` (—Å—Ç—Ä–æ–∫–∞ 58)

```python
def blend_anchors(mode_weights: Dict[str, float], max_modes: int = 3) -> str:
    # –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —è–∫–æ—Ä—å –∑–∞–Ω–æ–≤–æ
    sorted_modes = sorted(...)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –≤—ã–∑–æ–≤–∞—Ö —Å —Ç–µ–º–∏ –∂–µ `mode_weights` —è–∫–æ—Ä—å –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ use case, –Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `functools.lru_cache`.

---

## ‚ö†Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è 3: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö

### 3.1 –ú—è–≥–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ test_degradation_sequence
**–§–∞–π–ª:** `tests/test_integration.py` (—Å—Ç—Ä–æ–∫–∞ 99-103)

```python
# Phase 4: Wait for COOLDOWN duration
for i in range(25):
    state = step(normal_metrics, now_after_emergency + float(i) * 0.1, cfg)

self.assertEqual(state.mode, OperationalMode.STANDARD)
self.assertEqual(state.energy, emergency_energy + 1)  # Recovered 1
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã —á–∏—Å–ª–æ–≤—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è. –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥–∞ –∏–∑–º–µ–Ω—è—Ç—Å—è, —Ç–µ—Å—Ç —Å–ª–æ–º–∞–µ—Ç—Å—è.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PropertyBased Testing.

---

### 3.2 –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
**–§–∞–π–ª:** `tests/test_core.py` (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤)

```python
def test_multiple_transitions_cycle(self):
    state = self.state  # –ó–∞–≤–∏—Å–∏—Ç –æ—Ç setUp()
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ setUp() –∏–∑–º–µ–Ω–∏—Ç—Å—è, –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ —Å–ª–æ–º–∞–µ—Ç—Å—è.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ setUp() —Å—Ç–∞–±–∏–ª–µ–Ω –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω.

---

## ‚ö†Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è 4: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã

### 4.1 –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** `ControllerConfig` –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –Ω–æ –Ω–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å `docs/CONFIGURATION.md` —Å —Ç–∞–±–ª–∏—Ü–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

---

### 4.2 –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç hardcoded –ø—É—Ç–∏
**–§–∞–π–ª:** `examples/resonance_demo.py` (—Å—Ç—Ä–æ–∫–∞ 11-18)

```python
current_dir = Path(__file__).parent
project_root = current_dir.parent
if str(project_root) not in sys.path:
    sys.path.insert(0, str(project_root))
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω –∏–∑ –¥—Ä—É–≥–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pip install -e .` –∏ –ø—Ä–æ—Å—Ç–æ `from arctl import ...`.

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ü—Ä–æ–±–ª–µ–º–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ |
|-----------|----------|-----------|---------|
| üî¥ –í—ã—Å–æ–∫–∏–π | –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å sentence-transformers | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ |
| üü° –°—Ä–µ–¥–Ω–∏–π | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å O(N¬≤) –≤ verify() | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ |
| üü° –°—Ä–µ–¥–Ω–∏–π | –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ |
| üü¢ –ù–∏–∑–∫–∏–π | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | –ù–∏–∑–∫–∞—è | –ù–∏–∑–∫–æ–µ |

---

## ‚úÖ –ù–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ...

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:**
- ‚úÖ –ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ù–µ—Ç —Å–ª–æ–º–∞–Ω–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Python 3.8+

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ "nice to have" —É–ª—É—á—à–µ–Ω–∏—è, –Ω–µ –±–ª–æ–∫–µ—Ä—ã.**

---

**–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞:** GitHub Copilot  
**–î–∞—Ç–∞:** 25 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
